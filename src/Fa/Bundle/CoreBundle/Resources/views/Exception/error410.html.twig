{% extends 'FaFrontendBundle::layout.html.twig' %}

{% block page_title %}
    Page Gone | Friday-Ad
{% endblock %}

{% block body %}
    <div class="row text-center error-page">
        <div  class="bg-img410"></div>
        {% if status_text %}
            <h1>{{ status_text }}</h1>
        {% else %}
            <h1>Congratz! Youâ€™ve found the 410 Error page!</h1>
        {% endif %}
        <h2 class="ptop_spac">Next, find something you really want from the search bar below or visit</h2>
        <a href="{{ path('fa_frontend_homepage') }}" class="hp-link">Friday Ad homepage</a>
        {{ render(controller('FaAdBundle:AdList:topSearch', { 'searchParams': searchParams is defined ? searchParams : {}, 'isErrorSearch': true } )) }}
    </div>
{% endblock %}

{% block dimension2 %}
    <!-- Google TAG Manager -->
    {% if app.user %}
        {% set ClientID = app.user.id %}
        {% set login_status = 'true' %}
        {% if app.user.role == 'ROLE_BUSINESS_SELLER' %}
            {% set userType = 'Business' %}
        {% else %}
            {% set userType = 'Private' %}
        {% endif %}
    {% else %}
        {% set ClientID = 'null' %}
        {% set login_status = 'false' %}
        {% set userType = 'null' %}
    {% endif %}
    <script>
        let adBlocker = false;
        if(isAdBlocker) {
            adBlocker = true;
        }
        window.dataLayer = window.dataLayer || [];
        dataLayer.push({
            "page": {
                "pageType": '_410_page',
                "loggedInStatus": '{{ login_status }}',
                "clientID": '{{ ClientID }}',
                "ipAddress": '{{ app.request.server.get("REMOTE_ADDR") }}',
                "loggedInType": '{{ userType }}',
                "adBlocker": adBlocker,
                "banners": '{{ bannersArray is defined ? bannersArray|length : '' }}'
            },
        });
    </script>
    <!-- Google TAG Manager -->
<script language="javascript" type="text/javascript">
//<![CDATA[
    {% if app.user.getId() is not defined or app.user.getId() is null %}
    	ga('set', 'dimension9', 'not logged in');
    {% else %}
    	ga('set', 'dimension9', 'logged in');
    {% endif %}
    ga('send', 'pageview', {'dimension1': defLocationText, 'dimension2':  '_410_page'{% if app.request.get('ti_url') %} ,'dimension8': '{{ app.request.get('ti_url') }}' {% endif %}});
//]]>
</script>
{% endblock %}