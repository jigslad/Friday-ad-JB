{% extends 'FaFrontendBundle::layout.html.twig' %}

{% set container = fetch_container_instance() %}
{% set locationRepository = fetch_repository('FaEntityBundle:Location') %}

{% block title %}
    {{'Choose your location'|trans({}, 'frontend-location')}}
{% endblock %}



{% block body -%}
    <style>
        .location-heading {
            margin: 30px 0;
        }
        .counties {
            background: #fff;
        }
        .choose-location {
            padding: 34px 0;
        }
        .link-list {
            margin: 0;
            list-style: none;
        }
        .link-list a {
            font-size: 14px;
            color: #4a4a4a;
            display: block;
            margin: 4px 0;
        }
        .choose-location h3 {
            margin: 28px 0 24px;
        }
        @media (max-width: 640px) {
            .mobile-col{
                width: 50% !important;
            }
        }
    </style>
    {% cache 'footer|locations|front/locations' 86400 %}
        {% set townIds   = locationRepository.getTopTownIdsForLocation(container) %}
        {% set countries = locationRepository.getLocationByLevel(1) %}
        {% set counties  = locationRepository.getLocationByLevel(2) %}
        {% set towns     = locationRepository.getLocationByIds(townIds) %}
    <div class="homepage-row pad-none">
        <div class="container">
            <div class="row">
                <div class="col">
                    <h1 class="text-center simple-heading location-heading">{{'Choose your location'|trans({}, 'frontend-location')}}</h1>
                </div>
            </div>
        </div>
    </div>
    <div class="homepage-row white-bg pad-none">
        <div class="container">
            <div class="row">
                <div class="col">
                    <div class="choose-location counties">
                        {{ include('FaEntityBundle:Location:renderLocations.html.twig', {'locations': countries}) }}
                        {{ include('FaEntityBundle:Location:renderLocations.html.twig', {'locations': counties, 'route': 'show_all_towns_by_county', 'blockName': 'Counties'|trans({}, 'frontend-location')}) }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="homepage-row pad-none">
        <div class="container">
            <div class="row">
                <div class="col">
                    <div class="choose-location towns">
                        {{ include('FaEntityBundle:Location:renderLocations.html.twig', {'locations': towns, 'blockName': 'Top Towns'|trans({}, 'frontend-location')}) }}
                    </div>
                </div>
            </div>
        </div>
    {% endcache %}
{% endblock %}